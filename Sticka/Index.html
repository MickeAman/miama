import React, { useState, useEffect } from ‘react’;
import { Plus, Minus, RotateCcw } from ‘lucide-react’;

export default function KnittingCounter() {
const [count1, setCount1] = useState(() => {
const saved = localStorage.getItem(‘knitting-count1’);
return saved ? parseInt(saved, 10) : 0;
});
const [count2, setCount2] = useState(() => {
const saved = localStorage.getItem(‘knitting-count2’);
return saved ? parseInt(saved, 10) : 0;
});
const [wakeLock, setWakeLock] = useState(null);
const [keepAwake, setKeepAwake] = useState(() => {
const saved = localStorage.getItem(‘knitting-keep-awake’);
return saved === ‘true’;
});

useEffect(() => {
localStorage.setItem(‘knitting-count1’, count1.toString());
}, [count1]);

useEffect(() => {
localStorage.setItem(‘knitting-count2’, count2.toString());
}, [count2]);

useEffect(() => {
localStorage.setItem(‘knitting-keep-awake’, keepAwake.toString());
}, [keepAwake]);

useEffect(() => {
if (keepAwake) {
requestWakeLock();
} else {
releaseWakeLock();
}

```
return () => releaseWakeLock();
```

}, [keepAwake]);

const requestWakeLock = async () => {
try {
if (‘wakeLock’ in navigator) {
const lock = await navigator.wakeLock.request(‘screen’);
setWakeLock(lock);
}
} catch (err) {
console.log(‘Wake lock error:’, err);
}
};

const releaseWakeLock = () => {
if (wakeLock) {
wakeLock.release();
setWakeLock(null);
}
};

return (
<div className="min-h-screen bg-stone-50 flex items-center justify-center p-6">
<div className="bg-white rounded-lg shadow-sm border border-stone-200 p-8 w-full max-w-md">
<div className="flex justify-between items-center mb-8">
<h1 className="text-xl font-light text-stone-800 tracking-wide">
Varvräknare
</h1>

```
      <label className="flex items-center gap-2 cursor-pointer">
        <input
          type="checkbox"
          checked={keepAwake}
          onChange={(e) => setKeepAwake(e.target.checked)}
          className="w-5 h-5 cursor-pointer accent-stone-600"
        />
        <span className="text-xs font-light text-stone-600 tracking-wide">Håll vaken</span>
      </label>
    </div>

    <div className="space-y-6">
      {/* Counter 1 */}
      <div className="border border-stone-200 rounded p-6 bg-stone-50">
        <div className="text-center mb-6">
          <div className="text-stone-500 text-xs uppercase tracking-widest mb-2 font-light">
            Räknare 1
          </div>
          <div className="text-7xl font-light text-stone-800 tabular-nums">
            {count1}
          </div>
        </div>
        
        <div className="space-y-3">
          <button
            onClick={() => setCount1(count1 + 1)}
            className="w-full bg-stone-800 hover:bg-stone-700 text-white font-light py-7 px-4 rounded text-xl transition-colors active:scale-98 transform tracking-wide"
          >
            <Plus className="inline mr-2" size={28} strokeWidth={1.5} />
            Lägg till varv
          </button>
          
          <div className="grid grid-cols-2 gap-3">
            <button
              onClick={() => setCount1(Math.max(0, count1 - 1))}
              className="bg-white hover:bg-stone-100 border border-stone-300 text-stone-700 font-light py-5 px-2 rounded text-sm transition-colors active:scale-98 transform"
            >
              <Minus className="inline mr-1" size={18} strokeWidth={1.5} />
              Ångra
            </button>
            
            <button
              onClick={() => setCount1(0)}
              className="bg-white hover:bg-stone-100 border border-stone-300 text-stone-700 font-light py-5 px-2 rounded text-sm transition-colors active:scale-98 transform"
            >
              <RotateCcw className="inline mr-1" size={18} strokeWidth={1.5} />
              Nollställ
            </button>
          </div>
        </div>
      </div>

      {/* Counter 2 */}
      <div className="border border-stone-200 rounded p-6 bg-stone-50">
        <div className="text-center mb-6">
          <div className="text-stone-500 text-xs uppercase tracking-widest mb-2 font-light">
            Räknare 2
          </div>
          <div className="text-7xl font-light text-stone-800 tabular-nums">
            {count2}
          </div>
        </div>
        
        <div className="space-y-3">
          <button
            onClick={() => setCount2(count2 + 1)}
            className="w-full bg-stone-800 hover:bg-stone-700 text-white font-light py-7 px-4 rounded text-xl transition-colors active:scale-98 transform tracking-wide"
          >
            <Plus className="inline mr-2" size={28} strokeWidth={1.5} />
            Lägg till varv
          </button>
          
          <div className="grid grid-cols-2 gap-3">
            <button
              onClick={() => setCount2(Math.max(0, count2 - 1))}
              className="bg-white hover:bg-stone-100 border border-stone-300 text-stone-700 font-light py-5 px-2 rounded text-sm transition-colors active:scale-98 transform"
            >
              <Minus className="inline mr-1" size={18} strokeWidth={1.5} />
              Ångra
            </button>
            
            <button
              onClick={() => setCount2(0)}
              className="bg-white hover:bg-stone-100 border border-stone-300 text-stone-700 font-light py-5 px-2 rounded text-sm transition-colors active:scale-98 transform"
            >
              <RotateCcw className="inline mr-1" size={18} strokeWidth={1.5} />
              Nollställ
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
```

);
}
